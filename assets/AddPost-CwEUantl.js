import{r as t,u as N,j as e}from"./index-CmAmRIIc.js";import{P as A}from"./Post-BFmlTh1a.js";import{A as P}from"./globals-mhpEhTSX.js";import{d as _}from"./cache-UbEKbjRU.js";function I({id:s=null,fromType:n=null,onAddPost:j}){const[l,x]=t.useState(""),[d,p]=t.useState(""),[o,h]=t.useState(""),[b,C]=t.useState(!1),[u,S]=t.useState(!1),[i,g]=t.useState(!1),[m,c]=t.useState(""),{user:k}=N(),y=`${P}/${n}/${s}`;async function f(r){r.preventDefault();try{if(c("Adding to database.."),g(!0),l.trim()!==""||d.trim()!==""||o.trim()!==""){const a=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k.apikey}`},body:JSON.stringify({title:l,body:d,storyid:+s,images:o.trim()!==""?o.trim().split(" "):[],type:n,special:b,secret:u})});if(!a.ok)throw new Error("Error saving data..");if(a.ok){const v=await a.json();console.log(v),j(v)}}else c("Can't add a post with the current inputs");p(""),x(""),h(""),g(!1),c("Saved Data."),_(y)}catch(a){console.error(a),c("Error saving data")}}return e.jsxs("div",{className:"flex flex-col items-center justify-center gap-10",children:[e.jsxs("form",{method:"POST",className:"flex max-w-[500px] min-w-[300px] flex-col gap-4 border border-r-0 border-l-0 p-10 md:rounded-xl md:border",style:{backgroundColor:"var(--story-bg-color)",borderColor:"var(--story-border-color)"},onSubmit:f,children:[s!==null&&e.jsxs("h1",{style:{color:"var(--font-color)"},className:"text-2xl font-bold",dir:"ltr",children:["Add a post for ",n," ",s]}),e.jsx("hr",{style:{borderColor:"var(--story-border-color)"}}),e.jsx("label",{htmlFor:"title",dir:"ltr",children:"Title:"}),e.jsx("input",{disabled:i,name:"title",id:"title",value:l,onChange:r=>x(r.target.value),className:"rounded-lg p-2 px-5 text-2xl font-bold focus:outline-0 disabled:opacity-30",style:{backgroundColor:"var(--bg-color)",borderColor:"var(--story-border-color)"}}),e.jsx("label",{htmlFor:"body",dir:"ltr",children:"Body:"}),e.jsx("textarea",{name:"body",id:"body",value:d,onChange:r=>p(r.target.value),className:"rounded-lg p-2 px-5 focus:outline-0 disabled:opacity-30",style:{backgroundColor:"var(--bg-color)",borderColor:"var(--story-border-color)"},disabled:i}),e.jsx("label",{htmlFor:"images",dir:"ltr",children:"Images:"}),e.jsx("textarea",{name:"images",id:"images",value:o,onChange:r=>h(r.target.value),className:"rounded-lg p-2 px-5 focus:outline-0 disabled:opacity-30",style:{backgroundColor:"var(--bg-color)",borderColor:"var(--story-border-color)"},dir:"ltr",disabled:i}),e.jsxs("div",{className:"flex items-center justify-center gap-4",dir:"ltr",children:[e.jsx("label",{htmlFor:"add_story_isSpecial",dir:"ltr",children:"Golden Post?"}),e.jsx("input",{type:"checkbox",id:"add_story_isSpecial",name:"special",checked:b,value:b,onChange:r=>C(r.target.checked)})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",dir:"ltr",children:[e.jsx("label",{htmlFor:"add_story_isSecret",dir:"ltr",children:"Secret Post?"}),e.jsx("input",{type:"checkbox",id:"add_story_isSecret",name:"special",checked:u,value:u,onChange:r=>S(r.target.checked)})]}),e.jsx("hr",{className:"border-zinc-800"}),e.jsx("button",{type:"submit",onClick:f,disabled:i,style:{backgroundColor:"var(--bg-color)",borderColor:"var(--story-border-color)"},className:"rounded-lg border border-zinc-950 bg-zinc-950 p-2 px-5 transition-all duration-100 hover:cursor-pointer hover:border hover:border-zinc-700 hover:bg-zinc-800 disabled:opacity-30",children:"Add Post"}),e.jsx("p",{dir:"ltr",className:m==="Saved Data."?"text-green-500":m==="Adding to database.."?"text-zinc-100":"text-red-500",children:m})]}),e.jsx("p",{className:"text-xl font-bold text-green-200",children:"المنشور بعض الإضافة"}),e.jsx("hr",{className:"border-zinc-800"}),e.jsx(A,{title:l,body:d,images:o.trim()!==""?o.split(" "):[],fromAdmin:!0})]})}export{I as default};
