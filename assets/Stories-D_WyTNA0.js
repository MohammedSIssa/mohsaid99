import{u as f,j as t,N as i,M as y,e as m,r as h,c as g,F as j,f as b,U as w}from"./index-D8t40jS5.js";import{A as d}from"./globals-mhpEhTSX.js";import{d as x}from"./cache-UbEKbjRU.js";function v({item:e,idx:s,onDeleteStory:l}){const r=e.special,{user:o}=f(),n=d+"/delete/story/"+e.id,a=d+"/"+e.type+"/"+e.count,c=d+"/"+e.type;async function p(){if(window.confirm("Delete story?")){l(e.id),x(a),x(c);const u=await fetch(n,{method:"DELETE",headers:{Authorization:`Bearer: ${o.apikey}`}});u.ok&&console.log("Deleted Successfully"),u.ok||alert("Could not delete the story")}}return t.jsxs(t.Fragment,{children:[t.jsxs(i,{className:`story relative h-full w-60 min-w-60 snap-start rounded-lg border p-3 px-4 ${r?"gold":""}`,to:`/${e.type}${e.type!=="special"?"s":""}/${e.count}`,children:[t.jsx("h1",{className:"text-lg font-bold",children:e.title}),t.jsx("p",{className:"mt-1 text-xs",children:e?.summary?e.summary:"ðŸ”´"}),t.jsxs("p",{className:"story-count absolute bottom-1 left-3 font-bold italic",children:["#",e.count]}),t.jsx("p",{className:`story-year absolute top-[-21px] left-3 skew-x-2 rounded-md p-px px-2.5 font-bold italic ${r?"bg-yellow-400 text-yellow-900":"bg-rose-700 text-zinc-50"}`,children:e.year})]},s),o?.role===1&&t.jsxs(t.Fragment,{children:["â†”ï¸",t.jsxs("div",{className:"flex w-5 flex-col items-center justify-center gap-2",children:[t.jsx(i,{to:`/admin/update/story/${e.id}`,className:"rounded bg-blue-700 p-1 transition-all duration-300 hover:cursor-pointer hover:bg-white hover:text-blue-700",state:{type:e.type,count:e.count},children:t.jsx(y,{})}),t.jsx("button",{onClick:p,className:"rounded bg-red-500 p-1 transition-all duration-300 hover:cursor-pointer hover:bg-white hover:text-red-500",children:t.jsx(m,{})})]})]})]})}function N({type:e,count:s}){const[l,r]=h.useState(s),o=g();function n(c){r(c.target.value)}function a(){o(`/${e}${e!=="special"?"s":""}/${l}`)}return t.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center",children:[t.jsx(i,{to:"/admin/add/story",className:"story p-5 hover:brightness-110 transition-all duration-200 hover:cursor-pointer w-60 min-w-full border rounded-lg flex items-center justify-center",state:{type:e,count:s},children:t.jsx(j,{size:50})}),t.jsxs("div",{className:"md:hidden w-full flex gap-2",children:[t.jsx("input",{onChange:n,type:"number",className:"bg-slate-500 grow flex items-center justify-center focus:outline-0 rounded px-2 max-w-[80%]"}),t.jsx("button",{onClick:a,className:"bg-slate-500 grow flex items-center justify-center text-slate-200 rounded",children:t.jsx(b,{})})]})]})}const A=({data:e,type:s,onDeleteStory:l})=>{const{user:r}=h.useContext(w);return t.jsxs("div",{className:"stories scroll-snap-x mt-8 flex h-47 w-full snap-mandatory items-center gap-8 overflow-x-auto overflow-y-hidden scroll-smooth border-0 border-b p-5 py-10 md:mt-18",dir:"rtl",children:[r?.role===1&&t.jsx(N,{type:s,count:e.length+1}),[...e].map((o,n)=>t.jsx(v,{item:o,idx:n,onDeleteStory:l},n))]})};export{A as S};
