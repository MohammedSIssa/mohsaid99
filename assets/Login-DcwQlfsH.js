import{u as y,r as e,j as r,s as j}from"./index-D8t40jS5.js";import{A as k}from"./globals-mhpEhTSX.js";function S(){const{user:i,setUser:g}=y(),[d,f]=e.useState(""),[c,p]=e.useState(""),[t,m]=e.useState(!1),C=`${k}/login`,[n,u]=e.useState(!1),[s,a]=e.useState(!1),[x,o]=e.useState(i?.username?"انت مسجل الدخول":"");async function v(l){if(l.preventDefault(),d.trim()!==""&&c.trim()!=="")try{m(!0),o("");const b=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:c})});if(b.ok){const h=await b.json();g(h),j(h),u(!0),a(!1),o("تم تسجيل الدخول بنجاح")}b.ok||(g({}),m(!1),p(""),u(!1),a(!0),o("خطأ في البيانات"),f(""))}catch{throw new Error("Failed to login!")}else o("اكتب اسمك وكلمة السر"),a(!0),u(!1)}return r.jsx("div",{className:"flex h-dvh flex-col items-center justify-center",children:r.jsxs("form",{className:"login-form flex max-w-[300px] flex-col gap-5 rounded-lg border p-10 transition-all duration-200",onSubmit:v,style:n?{backgroundColor:"var(--success-login-bg-color)",borderColor:"var(--success-login-border-color)"}:s?{backgroundColor:"var(--failure-login-bg-color)",borderColor:"var(--failure-login-border-color)"}:{},children:[!n&&r.jsxs(r.Fragment,{children:[r.jsx("label",{htmlFor:"username",className:"font-bold",children:"اسم المستخدم:"}),r.jsx("input",{type:"text",dir:"ltr",name:"username",id:"username",className:"rounded-lg p-2 px-5 text-zinc-50 focus:border focus:outline-0 disabled:opacity-30",value:d,onChange:l=>{f(l.target.value),a(!1),o("")},autoComplete:"off",required:!0,style:s?{backgroundColor:"var(--failure-login-border-color)",borderColor:"var(--failure-login-bg-color)"}:{backgroundColor:"var(--bg-color)",borderColor:"var(--story-border-color)"},disabled:t||i?.username}),r.jsx("label",{htmlFor:"password",className:"font-bold",children:"كلمة السر:"}),r.jsx("input",{type:"password",dir:"ltr",name:"password",autoComplete:"off",id:"password",className:"rounded-lg p-2 px-5 text-zinc-50 focus:border focus:outline-0 disabled:opacity-30",value:c,onChange:l=>{p(l.target.value),a(!1),o("")},required:!0,style:s?{backgroundColor:"var(--failure-login-border-color)",borderColor:"var(--failure-login-bg-color)"}:{backgroundColor:"var(--bg-color)",borderColor:"var(--story-border-color)"},disabled:t||i?.username}),r.jsx("button",{onClick:v,disabled:t,style:s?{borderColor:"var(--failure-login-border-color)",backgroundColor:"var(--failure-login-bg-color)"}:{backgroundColor:"var(--bg-color)",borderColor:"var(--story-border-color)"},className:"rounded-lg border p-2 px-5 transition-all duration-100 hover:cursor-pointer hover:brightness-125 disabled:cursor-progress disabled:opacity-25",children:"سجل الدخول"})]}),t&&!n&&r.jsx("p",{children:"جار تسجيل الدخول.."}),n&&r.jsx("p",{className:"px-5 text-2xl font-bold text-green-300",children:x}),s&&r.jsx("p",{className:"text-red-300",children:x})]})})}export{S as default};
