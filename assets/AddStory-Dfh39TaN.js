import{r,d as _,u as S,j as e}from"./index-D8t40jS5.js";import{A as z}from"./globals-mhpEhTSX.js";import{d as C}from"./cache-UbEKbjRU.js";function F(){const[d,i]=r.useState(""),[l,c]=r.useState(""),[u,p]=r.useState(""),[m,x]=r.useState(""),[o,h]=r.useState(!1),[a,f]=r.useState(),s=_();r.useEffect(()=>{f(s.state.type),x(s.state.count)},[s.state]);const{user:v}=S(),b=`${z}/${a}`,[y,n]=r.useState("");async function g(t){t.preventDefault();try{if(n("Adding story.."),C(b),!(await fetch(b,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v.apikey}`},body:JSON.stringify({title:d,year:l,type:a,summary:u,count:m,special:o})})).ok)throw new Error("Failed to save data.");i(""),c(""),p(""),h(!1),n("Saved Data.")}catch(j){console.error(j),n("Error saving data..")}}return e.jsxs("form",{method:"POST",className:"flex min-w-[300px] flex-col gap-4 rounded-xl border border-zinc-700 bg-zinc-900 p-10",onSubmit:g,children:[e.jsx("p",{className:"text-xl font-bold text-green-200",children:"فورم اضافة الستوري"}),e.jsx("hr",{className:"border-zinc-800"}),e.jsx("label",{htmlFor:"add_story_type",dir:"ltr",children:"Type:"}),e.jsxs("select",{className:"bg-zinc-800 p-2 text-zinc-50 focus:border focus:border-zinc-600 focus:outline-0",onChange:t=>f(t.target.value),id:"add_story_type",value:a,children:[e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"goal",children:"Goal"}),e.jsx("option",{value:"blog",children:"Blog"}),e.jsx("option",{value:"stat",children:"Stats"}),e.jsx("option",{value:"special",children:"Special"})]}),e.jsx("label",{htmlFor:"add_story_count",dir:"ltr",children:"Count:"}),e.jsx("input",{name:"week_count",id:"add_story_count",value:m,onChange:t=>x(t.target.value),className:"rounded-lg bg-zinc-800 p-2 px-5 text-zinc-50 focus:border focus:border-zinc-600 focus:outline-0",autoComplete:"off",dir:"ltr",required:!0}),e.jsxs("label",{htmlFor:"add_story_period",dir:"ltr",children:["Title:"," "]}),e.jsx("input",{name:"period",id:"add_story_period",value:d,onChange:t=>i(t.target.value),className:"rounded-lg bg-zinc-800 p-2 px-5 text-zinc-50 focus:border focus:border-zinc-600 focus:outline-0",autoComplete:"off",required:!0}),e.jsx("label",{htmlFor:"add_story_year",dir:"ltr",children:"Year:"}),e.jsx("input",{name:"year",id:"add_story_year",value:l,onChange:t=>c(t.target.value),className:"rounded-lg bg-zinc-800 p-2 px-5 text-zinc-50 focus:border focus:border-zinc-600 focus:outline-0",autoComplete:"off",dir:"ltr",required:!0}),e.jsx("label",{htmlFor:"add_story_summary",dir:"ltr",children:"Summary:"}),e.jsx("input",{name:"summary",id:"add_story_summary",value:u,onChange:t=>p(t.target.value),className:"rounded-lg bg-zinc-800 p-2 px-5 text-zinc-50 focus:border focus:border-zinc-600 focus:outline-0",autoComplete:"off"}),e.jsxs("div",{className:"flex items-center justify-center gap-4",dir:"ltr",children:[e.jsx("label",{htmlFor:"add_story_isSpecial",dir:"ltr",children:"Golden Story?"}),e.jsx("input",{type:"checkbox",id:"add_story_isSpecial",name:"special",checked:o,value:o,onChange:t=>h(t.target.checked)})]}),e.jsx("button",{type:"submit",onClick:g,className:"rounded-lg border border-zinc-950 bg-zinc-950 p-2 px-5 transition-all duration-100 hover:cursor-pointer hover:border hover:border-zinc-700 hover:bg-zinc-800",children:"Add Story"}),e.jsx("p",{className:y==="Saved Data."?"text-green-500":"text-red-500",children:y})]})}export{F as default};
