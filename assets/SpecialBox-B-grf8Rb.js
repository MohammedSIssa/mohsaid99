import{r as n,u as g,a as y,j as o}from"./index-Bu59DLIu.js";import{L as P,S}from"./ScrollToTop-BMiSunIA.js";import{E as j}from"./ErrorLoadingStories-Twdl9E05.js";import A from"./AddPost-C9jJjK7Q.js";import{A as h}from"./globals-mhpEhTSX.js";import{l as E}from"./logger-B5AKrlHs.js";import{P as L}from"./Post-IwW_URmu.js";import{f as I}from"./cache-UbEKbjRU.js";function F(){const[i,r]=n.useState(null),[u,c]=n.useState(!0),[f,p]=n.useState(null),{user:e}=g(),{id:a}=y(),l=`${h}/special/${a}`;function d(t){r(s=>s.filter(x=>x.id!==t))}function m(t){r(s=>[...s,t])}if(n.useEffect(()=>{async function t(){try{c(!0);const s=await I(l);r(s),e?.username!=="mohsaid99"&&await E(e?.username,`Special | ${a}`)}catch(s){r(null),p(s)}finally{c(!1)}}t()},[a,e?.username,l]),u)return o.jsx(P,{});if(f)return o.jsx(j,{});if(i)return o.jsxs(o.Fragment,{children:[i.map((t,s)=>o.jsx(L,{title:t.title,body:t.body,images:t.images,postId:t.id,special:t.special,secret:t.secret,postedAt:t.iat,type:t.type,storyId:t.storyid,onDeletePost:()=>d(t.id)},s)),e?.role===1&&o.jsx(A,{id:a,fromType:"special",onAddPost:m}),o.jsx(S,{})]})}export{F as default};
