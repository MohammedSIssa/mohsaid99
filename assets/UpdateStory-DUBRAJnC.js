import{r as a,u as $,a as w,j as e}from"./index-D8t40jS5.js";import{A as i}from"./globals-mhpEhTSX.js";import{d as k}from"./cache-UbEKbjRU.js";function E(){const[m,h]=a.useState(""),[x,f]=a.useState(""),[b,g]=a.useState(""),[l,j]=a.useState("week"),[c,_]=a.useState(!1),[d,S]=a.useState(1),[n,v]=a.useState(!0),[u,o]=a.useState(""),{user:p}=$(),{id:y}=w(),z=`${i}/story/${y}`,N=`${i}/update/story/${y}`,F=`${i}/${l}/${d}`,U=`${i}/${l}`;a.useEffect(()=>{async function t(){try{o("Fetching story data.."),v(!0);const r=await fetch(z,{headers:{Authorization:`Bearer ${p.apikey}`}});if(r.ok){const s=await r.json();h(s.title),f(s.summary),j(s.type),S(s.count),g(s.year),_(s.special),o("Fetched!")}}catch(r){console.error(r),o("Error occurred..")}finally{v(!1)}}t()},[y,z,p.apikey]);async function C(t){t.preventDefault();try{if(o("Updating..."),!(await fetch(N,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.apikey}`},body:JSON.stringify({title:m,summary:x,year:b,special:c,type:l,count:d})})).ok)throw o("Failed to Update"),new Error("Failed to Update");k(F),k(U),o("Updated Successfully")}catch(r){console.error(r)}}return e.jsxs("form",{onSubmit:C,className:"flex min-w-[300px] flex-col gap-4 rounded-xl border border-zinc-700 bg-zinc-900 p-10",children:[e.jsx("p",{className:"text-xl font-bold text-green-200",children:"فورم تحديث الستوري"}),e.jsx("hr",{className:"border-zinc-800"}),e.jsx("label",{htmlFor:"up_story_count",dir:"ltr",children:"Count:"}),e.jsxs("div",{className:"flex flex-wrap gap-4",dir:"ltr",children:[e.jsx("input",{type:"number",id:"up_story_count",name:"count",value:d,dir:"ltr",className:"rounded-lg bg-zinc-800 p-2 px-5 text-zinc-50 focus:outline-0 disabled:opacity-20",onChange:t=>S(t.target.value)}),e.jsxs("select",{value:l,onChange:t=>j(t.target.value),className:"bg-zinc-800 p-2 text-zinc-50 focus:border focus:border-zinc-600 focus:outline-0",id:"up_story_type",name:"up_story_type",children:[e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"goal",children:"Goal"}),e.jsx("option",{value:"blog",children:"Blog"}),e.jsx("option",{value:"special",children:"Special"}),e.jsx("option",{value:"stat",children:"Stat"})]})]}),e.jsx("label",{htmlFor:"up_story_title",dir:"ltr",children:"Title:"}),e.jsx("input",{id:"up_story_title",value:m,name:"title",onChange:t=>h(t.target.value),disabled:n,autoComplete:"off",className:"rounded-lg bg-zinc-800 p-2 px-5 font-bold text-zinc-50 focus:outline-0 disabled:opacity-20"}),e.jsx("label",{htmlFor:"up_story_summary",dir:"ltr",children:"Summary:"}),e.jsx("input",{id:"up_story_summary",value:x,name:"summary",className:"rounded-lg bg-zinc-800 p-2 px-5 text-zinc-50 focus:outline-0 disabled:opacity-20",onChange:t=>f(t.target.value),disabled:n,autoComplete:"off"}),e.jsx("label",{htmlFor:"up_story_year",dir:"ltr",children:"Year:"}),e.jsx("input",{id:"up_story_year",value:b??"",name:"year",disabled:n,autoComplete:"off",className:"rounded-lg bg-zinc-800 p-2 px-5 text-zinc-50 focus:outline-0 disabled:opacity-20",onChange:t=>g(t.target.value)}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("input",{type:"checkbox",id:"up_story_isSpecial",name:"special",value:c,checked:c,disabled:n,className:"rounded-lg bg-zinc-800 p-2 px-5 text-zinc-50 focus:outline-0 disabled:opacity-20",onChange:t=>_(t.target.checked)}),e.jsx("label",{htmlFor:"up_story_isSpecial",dir:"ltr",children:"Golden Story?"})]}),e.jsx("button",{type:"submit",onClick:C,className:"rounded-lg border border-zinc-950 bg-zinc-950 p-2 px-5 transition-all duration-100 hover:cursor-pointer hover:border hover:border-zinc-700 hover:bg-zinc-800",children:"Update Story"}),e.jsx("p",{dir:"ltr",className:u==="Updated Successfully"?"text-green-500":u==="Failed to Update"?"text-red-500":"",children:u})]})}export{E as default};
