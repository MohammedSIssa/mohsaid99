import{j as t,r as a,u as x}from"./index-BpA1dEG3.js";import{A as u}from"./globals-Dt7Fz8Mk.js";function j(){const s=Array.from({length:20});return t.jsx("div",{className:"flex items-center justify-center pb-20",children:t.jsxs("table",{className:"w-full animate-pulse border-b-2 border-white/20 shadow-xl shadow-black/10 md:w-[500px] md:border-2 [&_tr]:h-10",dir:"ltr",children:[t.jsx("thead",{dir:"ltr",children:t.jsxs("tr",{className:"bg-white/40 backdrop-blur-2xl [&_th]:p-5",children:[t.jsx("th",{}),t.jsx("th",{}),t.jsx("th",{})]})}),t.jsx("tbody",{dir:"ltr",className:"[&_td]:p-8 [&_tr]:p-8 [&_tr]:odd:bg-white/10 [&_tr]:even:bg-white/20",children:s.map((l,i)=>t.jsxs("tr",{children:[t.jsx("td",{}),t.jsx("td",{dir:"ltr",children:t.jsx("small",{})}),t.jsx("td",{})]},i))})]})})}function b(){const[s,l]=a.useState(null),[i,n]=a.useState(!0),[o,d]=a.useState(!1),{user:c}=x();if(a.useEffect(()=>{async function r(){try{n(!0);const e=await fetch(u+"/log",{method:"GET",headers:{authorization:`Bearer: ${c?.apikey}`}});if(e.ok){const h=await e.json();l(h)}e.ok||(e.status>=400&&e.status<500&&d(!0),e.status>=500&&d(!0))}catch{d(!0)}finally{n(!1)}}r()},[c?.apikey]),o)return t.jsx("h1",{children:"Error loading logs"});if(i)return t.jsx(j,{});if(s)return t.jsx("div",{className:"flex items-center justify-center pb-20",children:t.jsxs("table",{className:"w-full border-b-2 border-white/20 shadow-xl shadow-black/10 md:w-fit md:border-2",dir:"ltr",children:[t.jsx("thead",{dir:"ltr",children:t.jsxs("tr",{className:"bg-white/40 backdrop-blur-2xl",children:[t.jsx("th",{children:"Username"}),t.jsx("th",{children:"Details"}),t.jsx("th",{children:"URL"})]})}),t.jsx("tbody",{dir:"ltr",className:"[&_tr]:odd:bg-white/10 [&_tr]:even:bg-white/20",children:s.map((r,e)=>t.jsxs("tr",{children:[t.jsx("td",{children:r.username}),t.jsx("td",{dir:"ltr",children:t.jsx("small",{children:r.details})}),t.jsx("td",{children:r.visited})]},e))})]})})}export{b as default};
