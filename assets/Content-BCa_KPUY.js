import{u as j,a as A,b as E,c as L,r as i,j as o}from"./index-Bu59DLIu.js";import{A as S}from"./globals-mhpEhTSX.js";import{l as $}from"./logger-B5AKrlHs.js";import{L as I,S as C}from"./ScrollToTop-BMiSunIA.js";import{E as D}from"./ErrorLoadingStories-Twdl9E05.js";import b from"./AddPost-C9jJjK7Q.js";import{P as v}from"./Post-IwW_URmu.js";import{f as w}from"./cache-UbEKbjRU.js";const _=({latest:u=!1})=>{const{user:r}=j(),{id:a}=A(),{type:e,latestStory:f}=E(),d=L();let l=`${S}/${e}/${a}`;const[c,n]=i.useState([]),[m,p]=i.useState(!0),[g,y]=i.useState(null);function x(t){n(s=>s.filter(h=>h.id!==t))}function P(t){n(s=>[...s,t])}if(i.useEffect(()=>{async function t(){p(!0);try{const s=await w(l);n(s),u&&d(`/${e}s/${f}`),r?.username!=="mohsaid99"&&await $(r?.username,`${e} | ${a}`)}catch{n(null),y("Error Getting data")}finally{p(!1)}}t()},[a,l,r?.username,e,u,d,f]),m)return o.jsx(I,{});if(g)return o.jsx(D,{});if(c)return o.jsxs(o.Fragment,{children:[c.map((t,s)=>o.jsx(v,{title:t.title,body:t.body,images:t.images,postId:t.id,special:t.special,secret:t.secret,postedAt:t.iat,type:t.type,storyId:t.storyid,onDeletePost:()=>x(t.id)},s)),r?.role===1&&o.jsx(b,{id:u?c.length:a,fromType:e,onAddPost:P}),o.jsx(C,{})]})};export{_ as default};
